(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["EditUserInfo"],{"1dc0":function(t,e,a){},"2e42":function(t,e,a){"use strict";a("99d8")},"2f7b":function(t,e,a){var n=a("31c4"),r=a("b289"),i="["+r+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"425f":function(t,e,a){var n=a("6dd5"),r=a("d3f4").f,i=Function.prototype,o=i.toString,s=/^\s*function ([^ (]*)/,c="name";n&&!(c in i)&&r(i,c,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},"75df":function(t,e,a){"use strict";a("904b")},"7d72":function(t,e,a){"use strict";var n=a("6dd5"),r=a("9fd9"),i=a("d1a0"),o=a("91f2"),s=a("5b09"),c=a("d9a5"),l=a("23f5"),u=a("0ba2"),f=a("a2e9"),d=a("f628"),p=a("34a8").f,m=a("f2e6").f,h=a("d3f4").f,g=a("2f7b").trim,v="Number",b=r[v],x=b.prototype,I=c(d(x))==v,y=function(t){var e,a,n,r,i,o,s,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(i=l.slice(2),o=i.length,s=0;s<o;s++)if(c=i.charCodeAt(s),c<48||c>r)return NaN;return parseInt(i,n)}return+l};if(i(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var w,k=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof k&&(I?f((function(){x.valueOf.call(a)})):c(a)!=v)?l(new b(y(e)),a,k):y(e)},C=n?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),N=0;C.length>N;N++)s(b,w=C[N])&&!s(k,w)&&h(k,w,m(b,w));k.prototype=x,x.constructor=k,o(r,v,k)}},"904b":function(t,e,a){},9657:function(t,e,a){"use strict";a("1dc0")},"99d8":function(t,e,a){},a6c0:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"jd_edit",attrs:{id:"edit"}},[a("HeaderBar",{attrs:{title:"编辑个人信息",back:!0}}),a("section",{staticClass:"jd_profile"},[a("span",{staticClass:"label"},[t._v("上传头像:")]),a("figure",{staticClass:"jd_user_logo"},[t.formate.avatar?a("img",{staticClass:"avatarImage",attrs:{src:t.formate.avatar,alt:""}}):t._e(),a("input",{staticClass:"ml-upload-image",attrs:{accept:"image/*",name:"img",id:"upload_file",type:"file"},on:{change:t.publishImage}})])]),a("TextInput",{attrs:{labelTitle:"名称：",placeholder:"请输入您的人姓名",type:"text",maxlength:t.usrMaxlength},model:{value:t.formate.userName,callback:function(e){t.$set(t.formate,"userName",e)},expression:"formate.userName"}}),a("TextInput",{attrs:{labelTitle:"名称：",placeholder:"请输入您的昵称",type:"text",maxlength:t.usrMaxlength},model:{value:t.formate.loginName,callback:function(e){t.$set(t.formate,"loginName",e)},expression:"formate.loginName"}}),a("TextInput",{attrs:{labelTitle:"手机号：",placeholder:"请填您的电话",type:"text",maxlength:t.mobileMaxlength},model:{value:t.formate.phonenumber,callback:function(e){t.$set(t.formate,"phonenumber",e)},expression:"formate.phonenumber"}}),a("section",{staticClass:"jd_sex"},[a("span",{staticClass:"text-label"},[t._v("性别:")]),a("section",{staticClass:"jd-radio-wrapper"},[a("div",{staticClass:"jd-radio",class:{active:0===parseInt(t.formate.sex,10)},on:{click:function(e){return t.changeSex(0)}}},[a("i",{staticClass:"icon"}),a("span",[t._v("男")])]),a("div",{staticClass:"jd-radio",class:{active:1===parseInt(t.formate.sex,10)},on:{click:function(e){return t.changeSex(1)}}},[a("i",{staticClass:"icon"}),a("span",[t._v("女")])])])]),a("div",{staticClass:"bottom-btn",on:{click:t.saveInfo}},[t._v(" 保存信息 ")])],1)},r=[],i=(a("425f"),a("d319"),a("bc4a"),a("6a61"),a("2e91")),o=a("d211"),s=a("cf6b"),c=a("82ae"),l=a.n(c),u=a("ce0e"),f=a("49c9"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"text-input-wrapper",class:t.type},[a("span",{staticClass:"text-label",domProps:{textContent:t._s(t.labelTitle)}}),a("span",{staticClass:"text-input-bar",on:{click:t.checkPicker}},["text"===t.type?a("input",{ref:"input",attrs:{type:"text",maxlength:t.maxlength,placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly},domProps:{value:t.currentValue},on:{change:function(e){return t.$emit("change",t.currentValue)},input:t.handleInput}}):t._e(),"area"===t.type?a("textarea",{ref:"input",attrs:{name:"",id:"",maxlength:t.maxlength,cols:"30",rows:"10",placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly},domProps:{value:t.currentValue},on:{change:function(e){return t.$emit("change",t.currentValue)},input:t.handleInput}}):t._e()]),t.arrow?a("span",{staticClass:"arrow"}):t._e()])},p=[],m=(a("8601"),a("a8aa"),a("7d72"),a("85a2"),{name:"",data:function(){var t=this;return{currentValue:t.value}},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.$emit("input",t)},attr:{immediate:!0,handler:function(t){var e=this;this.$nextTick((function(){var a=[e.$refs.input,e.$refs.textarea];a.forEach((function(e){e&&t&&Object.keys(t).map((function(a){return e.setAttribute(a,t[a])}))}))}))}}},methods:{handleInput:function(t){this.currentValue=t.target.value},checkPicker:function(){var t=this;t.arrow&&t.$emit("hanlePicker")}},props:{readonly:Boolean,maxlength:Number,arrow:Boolean,disabled:Boolean,value:{},attr:Object,labelTitle:{default:function(){return""},type:String},type:{default:function(){return"text"},type:String},placeholder:{default:function(){return""},type:String}}}),h=m,g=(a("e234"),a("5d22")),v=Object(g["a"])(h,d,p,!1,null,"58ad4110",null),b=v.exports,x={name:"editUserInfo",components:{TextInput:b,HeaderBar:u["a"]},computed:Object(o["a"])({},Object(s["c"])(["user"])),mounted:function(){var t=this;t.getUserData()},methods:{getUserData:function(){var t=this;for(var e in t.formate)t.formate[e]=t.user[e]},saveInfo:function(){var t=this;try{t.checkForm().then(Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["m"])(t.formate);case 2:a=e.sent,a&&(t.Toast("保存成功"),setTimeout((function(){t.$router.go(-1)}),1e3));case 4:case"end":return e.stop()}}),e)})))).catch((function(e){t.Toast(e.msg||"保存失败")}))}catch(e){t.Toast("信息保存失败")}},getLen:function(t){for(var e=0,a=t.length,n=-1,r=0;r<a;r++)n=t.charCodeAt(r),e+=n>=0&&n<=128?1:2;return e},checkForm:function(t,e){for(var a=this,n={avatar:"请选择您的头像",loginName:"请输入您的昵称",userName:"请输入您的姓名",phonenumber:"请输入手机号~"},r=!1,i=Object.keys(n),o="",s=0;s<i.length;s++){var c=i[s];if(console.log(a.formate[c],a.isInvalidString(a.formate[c])),r=a.isInvalidString(a.formate[c]),r){o=n[c];break}}return r||(a.getLen(a.formate.loginName)>a.usrMaxlength&&(r=!0,o="请输入正确的昵称50字内"),a.getLen(a.formate.userName)>a.usrMaxlength&&(r=!0,o="请输入正确的姓名"),/^1[23456789]\d{9}$/.test(a.formate.phonenumber)||(r=!0,o="请输入正确的手机号")),new Promise((function(t,e){r?e&&e(o):t&&t()}))},publishImage:function(t){var e=this,a=t.target.files[0],n=new FormData;n.append("file",a,a.name),n.append("chunk","0"),console.log(n.get("file"));var r=0,i=setInterval((function(){r>95?clearInterval(i):(console.log(r),e.Toast("".concat(r++,"%")))}),80),o={headers:{"Content-Type":"multipart/form-data"}};l.a.defaults.timeout=3e4,l.a.post("/api/system/oss/upload",n,o).then((function(t){console.log(t.data),e.isInvalidString(t.data.data)?(e.Toast("上传失败"),clearInterval(i)):(e.Toast("100%"),e.Toast("√"),e.Toast("上传成功"),clearInterval(i),e.formate.avatar=t.data.data)})).catch((function(t){console.log(t),e.Toast("上传失败"),clearInterval(i)}))},changeSex:function(t){var e=this;e.formate.sex=t},isInvalidString:function(t){return"string"===typeof t&&0==t.length||void 0==t||"undefined"==t||"null"==t||"undefined"===typeof t||"null"===typeof t||null==t}},data:function(){return{usrMaxlength:50,localAddress:null,mobileMaxlength:11,textTitle:"所在地区",formate:{avatar:"",sex:1,loginName:"",userName:"",phonenumber:""}}}},I=x,y=(a("2e42"),a("9657"),Object(g["a"])(I,n,r,!1,null,"4a8ce1da",null));e["default"]=y.exports},b289:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},bcf6:function(t,e,a){},ce0e:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"jd-header"},[a("span",{staticClass:"jd-header-item return-back",class:{show:t.back},on:{click:function(e){return e.stopPropagation(),t.returnBack(e)}}},[a("i")]),a("span",{staticClass:"jd-header-item",domProps:{textContent:t._s(t.title)}}),a("span",{staticClass:"jd-header-item",domProps:{textContent:t._s(t.subTitle)},on:{click:function(e){return e.stopPropagation(),t.subTitleEvent(e)}}})])},r=[],i=(a("cc16"),{props:{title:{default:function(){return""},type:String},back:{default:function(){return!1},type:Boolean},subTitle:{default:function(){return""},type:String}},methods:{returnBack:function(){var t=this;navigator.userAgent.indexOf("MSIE")>=0&&navigator.userAgent.indexOf("Opera")<0?history.length>0?(t.$emit("returnOriginal"),window.history.go(-1)):window.location.href="/home":navigator.userAgent.indexOf("Firefox")>=0||navigator.userAgent.indexOf("Opera")>=0||navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Chrome")>=0||navigator.userAgent.indexOf("WebKit")>=0?window.history.length>1?(t.$emit("returnOriginal"),window.history.go(-1)):window.location.href="/home":(t.$emit("returnOriginal"),window.history.go(-1))},subTitleEvent:function(){var t=this;t.$emit("handleEvent")}}}),o=i,s=(a("75df"),a("5d22")),c=Object(s["a"])(o,n,r,!1,null,"ca1424d4",null);e["a"]=c.exports},e234:function(t,e,a){"use strict";a("bcf6")}}]);
//# sourceMappingURL=EditUserInfo.c250b9f7.js.map